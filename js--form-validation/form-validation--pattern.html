<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Form Validation: Pattern</title>
    <link rel="stylesheet" href="../common-style.css" />
    <style>
      html {
        font-size: 13px;
      }
      body {
        height: 100vh;
        overflow: hidden;
      }
      div {
        display: flex;
        justify-content: space-between;
      }
      form {
        width: 50%;
        row-gap: 1.4rem;
      }
    </style>
  </head>
  <body>
    <form action="" onkeyup="validateForm()">
      <h1>Form Validation: Regular Expression</h1>
      <label class="name">
        <div>
          <h3>Name</h3>
          <span class="alert"></span>
        </div>
        <input type="text" name="" id="" placeholder="Enter name" />
      </label>
      <label class="mobile">
        <div>
          <h3>Mobile</h3>
          <span class="alert"></span>
        </div>
        <input type="text" name="" id="" placeholder="Enter name" />
      </label>
      <label class="email">
        <div>
          <h3>Email</h3>
          <span class="alert"></span>
        </div>
        <input type="text" name="" id="" placeholder="Enter name" />
      </label>
      <label class="pass">
        <div>
          <h3>Password</h3>
          <span class="alert"></span>
        </div>
        <input type="text" name="" id="" placeholder="Enter name" />
      </label>
      <button type="button">Validate</button>
    </form>
    <script>
      // const isValid = false;
      
      //   function to validate form
      function validateForm() {

        // console.log('inside function');

        // name input box
        let nameInput = document.querySelector(".name input");
        console.log("name executed");

        // name alert box
        let nameAlert = document.querySelector(".name .alert");
        console.log("nameAlert executed");

        // mobile input box
        let mobileInput = document.querySelector(".mobile input");
        console.log("mobile executed");

        // mobile alert box
        let mobileAlert = document.querySelector(".mobile .alert");
        // console.log('mobileAlert executed');

        // email input box
        let emailInput = document.querySelector(".email input");
        // console.log('email executed');

        // email alert box
        let emailAlert = document.querySelector(".email .alert");
        // console.log('emailAlert executed');

        // password input box
        let passInput = document.querySelector(".pass input");
        // console.log('pass executed');

        // password alert box
        let passAlert = document.querySelector(".pass .alert");
        // console.log('passAlert executed');

        // validation operation
        validateName(nameInput, nameAlert);
        validateMobile(mobileInput, mobileAlert);
        validateEmail(emailInput, emailAlert);
        validatePass(passInput, passAlert);

        isValid = true;
      }

      //   function to validate name
      function validateName(input, alertBox) {
        // pattern definition: for name
        let patternName = /^[a-zA-Z\s\S]{3,15}$/;

        //pattern validation: for name
        if (!patternName.test(input.value)) {
          // console.log("name regex match if executed");
          alertBox.innerText = "*Invalid Name";
          alertBox.style.color = "red";
          input.style.color = "red";
          input.style.border = "2px solid red";
        } else {
          console.log("name regex match else executed");
          alertBox.innerText = "";

          input.style.color = "green";
          input.style.border = "2px solid green";
        }
      }

      //   function to validate mobile number
      function validateMobile(input, alertBox) {
        // pattern definition: for mobile
        let patternMobile = /^\+[0-9]{2}[0-9]{10}$/;

        //pattern validation: for mobile
        if (!patternMobile.test(input.value)) {
          // console.log("mobile regex match if executed");
          alertBox.innerText = "*Invalid mobile";
          alertBox.style.color = "red";
          input.style.color = "red";
          input.style.border = "2px solid red";
        } else {
          // console.log("mobile regex match else executed");
          alertBox.innerText = "";

          input.style.color = "green";
          input.style.border = "2px solid green";
        }
      }

      //   function to validate email
      function validateEmail(input, alertBox) {
        // pattern definition: for email
        let patternEmail = /^[a-zA-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$/;

        //pattern validation: for email
        if (!patternEmail.test(input.value)) {
          // console.log("email regex match if executed");
          alertBox.innerText = "*Invalid email";
          alertBox.style.color = "red";
          input.style.color = "red";
          input.style.border = "2px solid red";
        } else {
          // console.log("email regex match else executed");
          alertBox.innerText = "";

          input.style.color = "green";
          input.style.border = "2px solid green";
        }
      }

      //   function to validate password
      function validatePass(input, alertBox) {
        // pattern definitions
        let patternWeakPass =
          /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[\W_])[a-zA-Z0-9\W_][\s\S]{1,6}$/;
        let patternMediumPass =
          /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[\W_])[a-zA-Z0-9\W_][\s\S]{7,8}$/;
        let patternStrongPass =
          /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[\W_])[a-zA-Z0-9\W_][\s\S]{9,}$/;

        // pattern validations

        //pattern validation: for password
        // if password is strong
        if (patternStrongPass.test(input.value)) {
          console.log("Strong pass executed");
          alertBox.innerText = "*Strong PasswordðŸ˜Œ";

          alertBox.style.color = "green";
          input.style.color = "green";
          input.style.border = "2px solid green";
        }

        // if password is medium
        else if (patternMediumPass.test(input.value)) {
          console.log("medium pass executed");
          alertBox.innerText = "*Medium passwordðŸ¥´";
          alertBox.style.color = "orange";

          input.style.color = "orange";
          input.style.border = "2px solid orange";
        }

        // if password is weak
        else if (patternWeakPass.test(input.value)) {
          console.log("weak pass executed");
          alertBox.innerText = "*Weak passwordðŸ˜’";
          alertBox.style.color = "red";

          input.style.color = "red";
          input.style.border = "2px solid red";
        }

        // if the password field is empty
        else {
          console.log("password regex match else executed");
          alertBox.innerText = "*Invalid Password Combination";
          alertBox.style.color = "red";

          input.style.color = "red";
          input.style.border = "2px solid red";
        }
      }


      // function buttonChange(){
      //   const button = document.querySelector("button");
      //   if(isValid == true || button.getAttribute('type') == 'button'){
      //     button.setAttribute('type', 'submit');
      //   }
      //   else{
      //     button.setAttribute('type', 'button');
      //   }
      // }
    </script>
  </body>
</html>
